{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useSession = exports.SessionProvider = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _supabaseConfig = require(\"../config/supabaseConfig\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"D:\\\\Moco\\\\PartyPilot\\\\src\\\\hooks\\\\useSession.jsx\";\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar SessionContext = (0, _react.createContext)({\n  session: null,\n  loading: true\n});\nvar useSession = exports.useSession = function useSession() {\n  return (0, _react.useContext)(SessionContext);\n};\nvar SessionProvider = exports.SessionProvider = function SessionProvider(_ref) {\n  var children = _ref.children;\n  var _useState = (0, _react.useState)(null),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    session = _useState2[0],\n    setSession = _useState2[1];\n  var _useState3 = (0, _react.useState)(true),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  (0, _react.useEffect)(function () {\n    _supabaseConfig.supabase.auth.getSession().then(function (_ref2) {\n      var session = _ref2.data.session;\n      setSession(session);\n      setLoading(false);\n    });\n    _supabaseConfig.supabase.auth.onAuthStateChange(function (_event, session) {\n      setSession(session);\n      setLoading(false);\n    });\n    return function () {\n      return _supabaseConfig.supabase.auth.removeAuthStateListener();\n    };\n  }, []);\n  return (0, _jsxRuntime.jsx)(SessionContext.Provider, {\n    value: {\n      session: session,\n      loading: loading\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_supabaseConfig","_jsxRuntime","_this","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","SessionContext","createContext","session","loading","useSession","exports","useContext","SessionProvider","_ref","children","_useState","useState","_useState2","_slicedToArray2","setSession","_useState3","_useState4","setLoading","useEffect","supabase","auth","getSession","then","_ref2","data","onAuthStateChange","_event","removeAuthStateListener","jsx","Provider","value"],"sources":["D:/Moco/PartyPilot/src/hooks/useSession.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { supabase } from '../config/supabaseConfig';\r\n\r\n// Create a context with default values\r\nconst SessionContext = createContext({ session: null, loading: true });\r\n\r\nexport const useSession = () => {\r\n  // Use the useContext hook to access the context\r\n  return useContext(SessionContext);\r\n};\r\n\r\n// Create a provider component to wrap your app and manage the session state\r\nexport const SessionProvider = ({ children }) => {\r\n  const [session, setSession] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Checks if there is already a session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setLoading(false);\r\n    });\r\n\r\n    // Subscribe to auth state changes using onAuthStateChange\r\n    supabase.auth.onAuthStateChange((_event, session) => {\r\n      setSession(session);\r\n      setLoading(false);\r\n    });\r\n\r\n    // Clean up the subscription when the component unmounts\r\n    return () => supabase.auth.removeAuthStateListener();\r\n  }, []);\r\n\r\n  return (\r\n    // Provide the session and loading state to the context\r\n    <SessionContext.Provider value={{ session, loading }}>\r\n      {children}\r\n    </SessionContext.Provider>\r\n  );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}