{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { supabase } from \"../../config/supabaseConfig\";\nimport { Button, Input } from 'react-native-elements';\nimport ProfilPicture from \"../../components/ProfileImage/ProfileImage\";\nimport { images, COLORS, SIZES } from \"../../constants\";\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Profile() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    website = _useState6[0],\n    setWebsite = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    avatarUrl = _useState8[0],\n    setAvatarUrl = _useState8[1];\n  function getProfile() {\n    return _getProfile.apply(this, arguments);\n  }\n  function _getProfile() {\n    _getProfile = _asyncToGenerator(function* () {\n      try {\n        var _session, _session2;\n        setLoading(true);\n        if (!((_session = session) != null && _session.user)) throw new Error('No user on the session!');\n        var _yield$supabase$from$ = yield supabase.from('profiles').select(`username, website, avatar_url`).eq('id', (_session2 = session) == null ? void 0 : _session2.user.id).single(),\n          data = _yield$supabase$from$.data,\n          error = _yield$supabase$from$.error,\n          status = _yield$supabase$from$.status;\n        if (error && status !== 406) {\n          throw error;\n        }\n        if (data) {\n          setUsername(data.username);\n          setWebsite(data.website);\n          setAvatarUrl(data.avatar_url);\n        }\n      } catch (error) {\n        if (error instanceof Error) {\n          Alert.alert(error.message);\n        }\n      } finally {\n        setLoading(false);\n      }\n    });\n    return _getProfile.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(LinearGradient, {\n      colors: [COLORS.heroColour, \"black\"],\n      style: styles.background\n    }), _jsxs(View, {\n      style: styles.wrapper,\n      children: [_jsx(Text, {\n        style: styles.headline,\n        children: \" Profile \"\n      }), _jsx(ProfilPicture, {\n        src: images.profile,\n        dimension: 200,\n        url: avatarUrl,\n        onUpload: function onUpload(url) {\n          setAvatarUrl(url);\n          updateProfile({\n            username: username,\n            website: website,\n            avatar_url: url\n          });\n        }\n      }), _jsx(Button, {\n        title: \"Sign Out\",\n        onPress: function onPress() {\n          return supabase.auth.signOut();\n        }\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center'\n  },\n  wrapper: {\n    width: \"100%\",\n    height: \"100%\",\n    alignItems: 'center',\n    paddingTop: 50\n  },\n  background: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    height: \"100%\"\n  },\n  headline: {\n    fontSize: SIZES.xxLarge,\n    color: COLORS.fontColour\n  }\n});","map":{"version":3,"names":["React","useState","Text","StyleSheet","View","supabase","Button","Input","ProfilPicture","images","COLORS","SIZES","LinearGradient","jsx","_jsx","jsxs","_jsxs","Profile","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","username","setUsername","_useState5","_useState6","website","setWebsite","_useState7","_useState8","avatarUrl","setAvatarUrl","getProfile","_getProfile","apply","arguments","_asyncToGenerator","_session","_session2","session","user","Error","_yield$supabase$from$","from","select","eq","id","single","data","error","status","avatar_url","Alert","alert","message","style","styles","container","children","colors","heroColour","background","wrapper","headline","src","profile","dimension","url","onUpload","updateProfile","title","onPress","auth","signOut","create","flex","alignItems","width","height","paddingTop","position","left","right","top","fontSize","xxLarge","color","fontColour"],"sources":["D:/Moco/PartyPilot/src/screens/Profile/Profile.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { Text, StyleSheet, View } from 'react-native'\r\nimport { supabase } from '../../config/supabaseConfig'\r\nimport { Button, Input } from 'react-native-elements'\r\nimport ProfilPicture from '../../components/ProfileImage/ProfileImage'\r\nimport { images, COLORS, SIZES } from '../../constants'\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\n\r\nexport default function Profile() {\r\n     const [loading, setLoading] = useState(true)\r\n  const [username, setUsername] = useState('')\r\n  const [website, setWebsite] = useState('')\r\n  const [avatarUrl, setAvatarUrl] = useState('')\r\n\r\nasync function getProfile() {\r\n    try {\r\n      setLoading(true)\r\n      if (!session?.user) throw new Error('No user on the session!')\r\n\r\n      const { data, error, status } = await supabase\r\n        .from('profiles')\r\n        .select(`username, website, avatar_url`)\r\n        .eq('id', session?.user.id)\r\n        .single()\r\n      if (error && status !== 406) {\r\n        throw error\r\n      }\r\n\r\n      if (data) {\r\n        setUsername(data.username)\r\n        setWebsite(data.website)\r\n        setAvatarUrl(data.avatar_url)\r\n      }\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        Alert.alert(error.message)\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n  \r\n    return (\r\n      <View style={styles.container}>\r\n        <LinearGradient\r\n        colors={[COLORS.heroColour, \"black\"]}\r\n        style={styles.background}\r\n        ></LinearGradient>\r\n        <View style={styles.wrapper}>\r\n          <Text style={styles.headline}> Profile </Text>\r\n          <ProfilPicture src={images.profile} dimension={200}\r\n            url={avatarUrl}\r\n            onUpload={(url) => {\r\n            setAvatarUrl(url)\r\n            updateProfile({ username, website, avatar_url: url })\r\n          }}/>\r\n\r\n          <Button title=\"Sign Out\" onPress={() => supabase.auth.signOut()} />\r\n        </View>\r\n      </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n   wrapper: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    alignItems: 'center', \r\n    paddingTop: 50,\r\n  },\r\n    background: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    height: \"100%\",\r\n  },\r\n  headline: {\r\n    fontSize: SIZES.xxLarge,\r\n    color: COLORS.fontColour\r\n  }\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}